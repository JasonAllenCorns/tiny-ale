<div class="w-full lg:w-1/2 xl:w-1/3 p-4 ml-8">
  {{#if loading}}
    loading
  {{else}}
    {{#unless authorizedUser}}
      <h3>No login for {{full-name user "first-last"}}</h3>

      {{#if showAccessWarning}}
        {{#t-notice type="alert"}}
          <p>
            {{full-name user "first-last"}} is active and has a role
            of {{titleize user.attributes.role}}. Without
            a login, no access is possible.
            Shall we create a login?
          </p>
          <button
            class="btn"
            onclick={{action "activateUser" user}}
          >
            Click to create a login
          </button>
        {{/t-notice}}
      {{else}}
        {{#t-notice}}
          No login is required due to status and/or role.
        {{/t-notice}}
      {{/if}}
    {{/unless}}

    {{#if authorizedUser}}
      <h3>Login active for {{full-name user "first-last"}}</h3>
      {{#if showRoleRequiresUpdate}}
        {{#t-notice type="alert"}}
          <p>
            The user has a different role defined in the login system,
            from what is shown here. The role should be updated in the
            login system to match the current setting of
            {{titleize user.attributes.role}}.
          </p>
          <button
            class="btn"
            onclick={{action (action "updateAuthorizedUser" user authorizedUser)}}
          >
            Click to update login role to {{titleize user.attributes.role}}
          </button>
        {{/t-notice}}
      {{/if}}
      {{#if showAttributesDontMatch}}
        {{#t-notice type="alert"}}
          <p>
            User settings, such as email or names, are out of sync. They should be updated to match what is shown here.
          </p>
          <button
            class="btn"
            onclick={{action (action "updateAuthorizedUser" user authorizedUser)}}
          >
            Click to update now
          </button>
        {{/t-notice}}
      {{/if}}
      {{#if showRemoveOption}}
        {{#t-notice type="alert"}}
          <p>
            {{full-name user "first-last"}} is no longer entitled to have a login.
          </p>
          <button
            class="btn"
            onclick={{action (action "removeLogin" user authorizedUser)}}
          >
            Click to remove their login now
          </button>
        {{/t-notice}}
      {{/if}}
    {{/if}} {{!-- an authorizedUser exists --}}
  {{/if}} {{!-- done loading --}}
</div>
